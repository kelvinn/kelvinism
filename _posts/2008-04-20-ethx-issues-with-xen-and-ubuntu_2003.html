---
layout: post
title: ethX Issues with Xen and Ubuntu
date: '2008-04-20T20:30:00.002+10:00'
author: Kelvin Nicholson
tags:
- articles
- virtualization
- xen
modified_time: '2013-01-09T21:19:18.150+11:00'
blogger_id: tag:blogger.com,1999:blog-3439832858234004835.post-8606472826901986435
blogger_orig_url: https://www.kelvinism.com/2008/04/ethx-issues-with-xen-and-ubuntu_2003.html
---

<p>My new guest VMs under Xen seem to be having issues where upon each reboot, the network interface gets incremented by 1.  For instance, it starts at eth0, then goes to eth1, then eth2, and eventually ethX.  There are two issues to fix: 1) get the count back to 0, and 2) stop it from counting again.</p><p>I was able to get them to decrease by looking in the /etc/udev/rules.d/70-persistent-net.rules file and removing all entries.</p><p>Next, I was able to prevent this by simply inserting a MAC address to the interface in the configuration.  For instance, one of my domU's has this entry:</p><pre class="brush: bash; light: true; ">vif         = [ 'mac=00:D0:59:83:DC:B5,bridge=xenbr0' ]
</pre><br />
<br />
<p>Lastly, I made sure (as I would with any server) to create an entry in the /etc/network/interfaces file.</p><pre class="brush: bash; light: true; ">auto eth0
iface eth0 inet static
address 192.168.1.16
gateway 192.168.1.1
netmask 255.255.255.0
</pre><br />
<br />
<p>Works like a charm.</p>