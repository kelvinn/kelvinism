<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Ci / Cd | Kelvin Nicholson</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/tags/ci-/-cd/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f038d33f020044aa04216c98f1a9c10e5ddb17b67121a7e556e42a43f96f24f5.css" integrity="sha256-8DjTPwIARKoEIWyY8anBDl3bF7ZxIaflVuQqQ/lvJPU=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/ci-/-cd/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/ci-/-cd/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<div id='redbar'></div>
<div id='greenbar'></div>

<div class="container">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>




<header class="header">
    <a href='/'><span id='logo'></span></a>
    <ul>
        <li><a href='/tags/travel/'>Travel</a></li>
        <li><a href='/tags/longevity/'>Longevity</a></li>
        <li><a href='/tags/projects/'>Projects</a></li>
        <li><a href='/tags/howtos/'>Tutorials</a></li>
        <li><a href='/about/'>Who</a></li>
    </ul>

</header><main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Snap-CI Deploy to OpenShift" href="http://localhost:1313/2014/11/snap-ci-deploy-to-openshift.html">Snap-CI Deploy to OpenShift </a>
      
      
    </h2>

    <div class="post-meta"><span title='2014-11-01 23:37:00.001 +1100 AEDT'>Published on November 1, 2014</span>&nbsp;·&nbsp;3 min

</div>
  </header>

  <div class="entry-content">
    <p>There are some wonderful <a href="http://www.thoughtworks.com/continuous-integration">CI</a> / <a href="http://www.thoughtworks.com/continuous-delivery">CD</a> tools out there right now, and some of them have very usable free tiers. A few good examples include <a href="https://www.shippable.com/">Shippable</a>, <a href="http://wercker.com/">Wercker</a>, <a href="http://www.cloudbees.com/products/dev">CloudBees,</a> and <a href="https://www.snap-ci.com/">Snap-CI</a>. There are others, of course, but these all allow at least one private project to get started.</p>
<p>I have recently moved my projects to Snap, and my hack for the day needed to be deployed to OpenShift. Although Snap has built in integrations for some providers, no such integration currently exists for OpenShift (yet!). However, it takes less than 10 minutes to configure a Deploy step to OpenShift, and here&rsquo;s how.</p>
<p><strong>Add SSH Keys</strong><br>
You will need to add your private SSH key (i.e. id_rsa) to Snap, and your public key to OpenShift (i.e. id_rsa.pub)</p>
<p>You can create the keys on another machine with the ssh-keygen command, and copy them into them into the corresponding places. In OpenShift, this is under Settings -&gt; Add a new key. Once open, paste in the contents of your id_rsa.pub key</p>
<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhmL4dE8VgbPKgFDflwiA3-oPHDGrFOd78PatxOxxjTH-j2r5HTmgKlelJpZbVN-9ye1dENz4GQSnIIKqDP0WzlXBbzMFluNn_U3s_z98W4iRYVVKp1PEwW1NDAGFe604gFoSRRnMj-C2uq/s1600/openshift.tiff"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhmL4dE8VgbPKgFDflwiA3-oPHDGrFOd78PatxOxxjTH-j2r5HTmgKlelJpZbVN-9ye1dENz4GQSnIIKqDP0WzlXBbzMFluNn_U3s_z98W4iRYVVKp1PEwW1NDAGFe604gFoSRRnMj-C2uq/s320/openshift.tiff"></a></p>
<p>In Snap, edit your configuration, navigate to your Deploy step, and look for &ldquo;Secure Files&rdquo; and &ldquo;Add new&rdquo;</p>
<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjnLe0T3zGNxp5K4gbrAXmVBJBLDM88nxeuifqbu4ssmcUYUOsv3ZdKnekpLIle3l6GRblomcU-q0q4o4GcWRHStJs4PCvGI7100RKNLpc9j0mHaKsD-R3iV_TV33KmBab1rhtS_IL1oYdA/s1600/AddFiles.tiff"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjnLe0T3zGNxp5K4gbrAXmVBJBLDM88nxeuifqbu4ssmcUYUOsv3ZdKnekpLIle3l6GRblomcU-q0q4o4GcWRHStJs4PCvGI7100RKNLpc9j0mHaKsD-R3iV_TV33KmBab1rhtS_IL1oYdA/s320/AddFiles.tiff"></a></p>
<p>Get the content of the id_rsa key you generated earlier and post it in the content box. It should look like this, with &ldquo;/var/go&rdquo; as the file location, except with a real key:</p>
<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgA8Ox5iz27x-HNT2QVWG8prydd6lMfbcrDa6YPAkU8zTSECO0ZDK_4e4KLP_-1zPt8dtRVPQPgP6hWMmffFPEmTmci13SBYL2azquQkelAouMa-s9xsmVqCLDCz_Yfthh4Zz53TsbJ9BNF/s1600/AddIdRSA.tiff"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgA8Ox5iz27x-HNT2QVWG8prydd6lMfbcrDa6YPAkU8zTSECO0ZDK_4e4KLP_-1zPt8dtRVPQPgP6hWMmffFPEmTmci13SBYL2azquQkelAouMa-s9xsmVqCLDCz_Yfthh4Zz53TsbJ9BNF/s400/AddIdRSA.tiff"></a></p>
<p><strong>Enable Git Push from Snap</strong></p>
<p>If you&rsquo;ve used ssh much, you are probably aware that that you can specify an identify file with the &ldquo;-i&rdquo; flag. The git command has no such flag, yet, but we can create a simple bash script that emulates this (script courtesy of <a href="http://alvinabad.wordpress.com/2013/03/23/how-to-specify-an-ssh-key-file-with-the-git-command/">Alvin Abad</a>).</p>
<p>Add another New File in Snap and paste in the below script:</p>
<pre tabindex="0"><code>#!/bin/bash

# The MIT License (MIT)
# Copyright (c) 2013 Alvin Abad

if \[ $# -eq 0 \]; then
    echo &#34;Git wrapper script that can specify an ssh-key file
Usage:
    git.sh -i ssh-key-file git-command
    &#34;
    exit 1
fi

# remove temporary file on exit
trap &#39;rm -f /tmp/.git\_ssh.$$&#39; 0

if \[ &#34;$1&#34; = &#34;-i&#34; \]; then
    SSH\_KEY=$2; shift; shift
    echo &#34;ssh -i $SSH\_KEY \\$@&#34; &gt; /tmp/.git\_ssh.$$
    chmod +x /tmp/.git\_ssh.$$
    export GIT\_SSH=/tmp/.git\_ssh.$$
fi

# in case the git command is repeated
\[ &#34;$1&#34; = &#34;git&#34; \] &amp;&amp; shift

# Run the git command
git &#34;$@&#34;
</code></pre><p>Give this script the name &ldquo;git.sh&rdquo;, set the file permissions to &ldquo;0755&rdquo;, and update the file location to &ldquo;/var/go&rdquo;.</p>
<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjthfqPh0zrFJs5C7xyUwe0MV-89R4IMcJv2h4hG1d_YXqyoD4PjKiHlvlHI2BmhqgPCVfaNBjJjKXc5zJeERK2BOdNF9EuHWO0dc_DeqrjokZ4NsiTvninQPtEHCTo_NWl10KfSthWDlHS/s1600/gitsh.tiff"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjthfqPh0zrFJs5C7xyUwe0MV-89R4IMcJv2h4hG1d_YXqyoD4PjKiHlvlHI2BmhqgPCVfaNBjJjKXc5zJeERK2BOdNF9EuHWO0dc_DeqrjokZ4NsiTvninQPtEHCTo_NWl10KfSthWDlHS/s400/gitsh.tiff"></a></p>
<p><strong>Profit</strong><br>
With all these parts configured correctly you can add this single line to your Deploy script:</p>
<pre tabindex="0"><code>/var/go/git.sh -i /var/go/id\_rsa push ssh://ABCDEFGHIJK123@example.yourdomain.rhcloud.com/~/git/example.git/
</code></pre><p>Re-run the build, check your logs, and it should deploy. Good luck!</p>

  </div>

  
</article>
    </main>

    </div>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Kelvin Nicholson</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
