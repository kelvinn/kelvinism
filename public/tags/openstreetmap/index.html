<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Openstreetmap | Kelvin Nicholson</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/tags/openstreetmap/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.746054a45389a17441e7242a7b3d450992663ac8002dd8afb1bc3ab4255ca3d1.css" integrity="sha256-dGBUpFOJoXRB5yQqez1FCZJmOsgALdivsbw6tCVco9E=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/openstreetmap/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/openstreetmap/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<div id='redbar'></div>
<div id='greenbar'></div>

<div class="container">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>




<header class="header">
    <a href='/'><span id='logo'></span></a>
    <ul>
        <li><a href='/tags/travel/'>Travel</a></li>
        <li><a href='/tags/longevity/'>Longevity</a></li>
        <li><a href='/tags/projects/'>Projects</a></li>
        <li><a href='/tags/howtos/'>Tutorials</a></li>
        <li><a href='/about/'>Who</a></li>
    </ul>

</header><main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Sydney Commute Times Mapped Part 2" href="http://localhost:1313/2013/08/sydney-commute-times-mapped-part-2.html">Sydney Commute Times Mapped Part 2 </a>
      
      
    </h2>

    <div class="post-meta"><span title='2013-08-05 07:55:00 +1000 AEST'>Published on August 5, 2013</span>&nbsp;·&nbsp;3 min

</div>
  </header>

  <div class="entry-content">
    <p>In <a href="http://www.kelvinism.com/2013/07/sydney-commute-times-mapped-part-1.html">Sydney Commute Times Mapped Part 1</a> I took a small step to a bigger goal of mashing together public transport in Sydney, and the <a href="http://strategies.planning.nsw.gov.au/Portals/0/Documents/MetroCommunityGuide.pdf">Metropolitan Strategy for Sydney to 2031</a>. The question I wanted to answer is this: how aligned is Sydney&rsquo;s public transport infrastructure and the Metropolitan Strategy&rsquo;s of a &ldquo;city of cities&rdquo;?</p>
<p>I decided to find out.</p>
<p>Thanks to the release of GTFS data by 131500 it is possible to visualise how long it takes via public transport to commute to the nearest &ldquo;centre&rdquo;.</p>
<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhDc0IriO971A2BQ7F9Nu1zYVZ_uO5OEwv8n0Z9vpPB1IElGYMI0r5bzCah9UCv5fqNzthkaHnPFBN6Pd5PD32GL_xXUJDAYKvXdx3OK8DwtotghU_PDA_Mc_qWYa8gUEKiJxj8Uos4mYbk/s1600/CItyOfCities.png"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhDc0IriO971A2BQ7F9Nu1zYVZ_uO5OEwv8n0Z9vpPB1IElGYMI0r5bzCah9UCv5fqNzthkaHnPFBN6Pd5PD32GL_xXUJDAYKvXdx3OK8DwtotghU_PDA_Mc_qWYa8gUEKiJxj8Uos4mYbk/s1600/CItyOfCities.png"></a></p>
<p>Cities and Corridors - <a href="http://strategies.planning.nsw.gov.au/Portals/0/Documents/MetroCommunityGuide.pdf">Metropolitan Strategy for Sydney to 2031</a></p>
<p>The Australian Bureau of Statistics collects data based on &ldquo;mesh blocks&rdquo;, or roughly an area containing roughly 50 dwellings. Last week I had some fun <a href="http://www.kelvinism.com/2013/07/mapping-mesh-blocks-with-tilemill.html">mapping the mesh blocks</a>, as well as looking at Sydney&rsquo;s <a href="http://www.kelvinism.com/2013/07/mapping-urban-density-in-sydney.html">urban densities</a>. These mesh blocks are a good size to look at for calculating commute times.</p>
<p>The simplified process I used was this, for the technical minded:</p>
<ol>
<li>Calculate the centre of each mesh block</li>
<li>Calculate the commute time via public transport from each block to every &ldquo;centre&rdquo; (using 131500&rsquo;s GTFS and OpenTripPlanner&rsquo;s Analyst tool)</li>
<li>Import times in a database, calculate lowest commute time to each centre</li>
<li>Visualise in TileMill</li>
<li>Serve tiles in TileStache and visualise with Leaflet</li>
</ol>
<p>The first map I created was simply to indicate how long it would take to the nearest centre. There appears to be rapidly poorer accessibility on the fringe of Sydney. I was also surprised of what appears to be a belt of higher times between Wetherill Park and all the way to Marrickville. There also appears to be poorer accessibility in <em>parts</em> of Western Sydney. It is worth noting that I offer not guarantee of the integrity of the data in these maps, and I have seen a few spots where the commute times increase significantly in adjacent mesh blocks. This tells me the street data (from OpenStreetMap) might not be connected correctly.</p>
<p><a href="http://maps.kelvinism.com/syd_city_cities.html">View Full Screen</a></p>
<p>My next map shows what areas are within 30 minutes.</p>
<p><a href="http://maps.kelvinism.com/syd_city_cities_2.html">View Full Screen</a></p>
<p>These maps were both created using open data and open source tools, which I find quite neat. In that spirit, I have exported the database (probably a bit hard for most to work with) to a Shapefile. You can open this in TileMill and experiment, if you wish. Download it from <a href="http://cdn.kelvinism.com/mb_2011_nsw_transport.zip">here</a> (note: 250MB zip file):</p>
<p>I have been interested in mapping traffic for a number of years, maybe ever since arriving in Sydney. It is sort of a hobby; I find making maps relaxing. My first little map was way back in 2008, where I <a href="http://www.kelvinism.com/2008/04/baby-steps-at-graphing-traffic_522.html">visualised speed</a> from a GPS unit. A little later I added <a href="http://www.kelvinism.com/2008/04/another-baby-step_1340.html">some colour to the visualisations</a>, and then used this as an excuse to create a little <a href="http://www.kelvinism.com/2008/05/gui-to-plot-driving-speed_6997.html">GUI for driving speed</a>. My interest in visualising individual vehicles has decreased recently, as it has now shifted to the mapping wider systems. Have an idea you would like to see mapped? Leave a note in the comments.</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Another Baby Step" href="http://localhost:1313/2008/04/another-baby-step_1340.html">Another Baby Step </a>
      
      
    </h2>

    <div class="post-meta"><span title='2008-04-29 20:30:00.006 +1000 AEST'>Published on April 29, 2008</span>&nbsp;·&nbsp;1 min

</div>
  </header>

  <div class="entry-content">
    <p>I showed a few of my co-workers my graph and one replied &ndash; oh! that&rsquo;s really cool. (I think only two of my co-workers are actually interested in my geekyness). He then emailed me tonight a .kmz file containing a colorized file of his speed. I looked at the kml and noticed it appeared to be dynamically allocated judging by the top speed. Well, as you could guess, I surely had to modify my code to include colors.</p>
<p>Within an hour I had a semi-working example, and within two hours will easily be done with this blog post. The code might not be perfect, but it first parses the xml and returns the max speed for the trip. Next, it colorizes the speeds based on a scale of 0-255, with 0 being blue for fast and 255 for being yellow, or slow. I was going to study for the CCNA tonight, but it looks like writing Python is just too much fun.</p>
<p><a href="http://picasaweb.google.com/lh/photo/vQ_v3bb0f6QLHiOEEShN1Q?feat=embedwebsite"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhHE0LrPY3qk6xEJfwkyjpNu6wcJtGv9vtho2gi7W9NCTbViKUXsImuIoNjcoZGTiSTTrGkRCOzb_WP8RE7wTweah7WkOwdp1x6b2b7teDvMvGcf2u-Ou9jYkfyKTDXpWY8N8J_GYEDYKkI/s288/gpstracks1.jpg"></a></p>
<p><a href="http://picasaweb.google.com/lh/photo/L7745TDqLkWkkftff8bV8g?feat=embedwebsite"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhySCFquf2IZDhKtK0aJNzlga4jA04ye11unofmz42J5_UB1AdyLDrsuxfZCwVUuj-9HBPcs04l3vkke-S3aMfbdI_2i6iwM4pmL4WFrCpD6YmSUJ9T8I6ixMDzhnuX7-I62nPs8VsP8gXx/s288/gpstracks2.jpg"></a></p>
<p>So what, you might ask, are those dips? Good question. They are huge speed bumps (and the tall blue mound in the middle is a really steep hill).</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Baby Steps at Graphing Traffic" href="http://localhost:1313/2008/04/baby-steps-at-graphing-traffic_522.html">Baby Steps at Graphing Traffic </a>
      
      
    </h2>

    <div class="post-meta"><span title='2008-04-27 20:30:00.006 +1000 AEST'>Published on April 27, 2008</span>&nbsp;·&nbsp;2 min

</div>
  </header>

  <div class="entry-content">
    <p>Status:<br>
You can likely tell that I&rsquo;ve been having some fun with graphing and mapping recently. I was reading a few articles about GIS and stumbled upon a pretty darn cool project at <a href="http://www.webopticon.com/projects/neighborhood_nets">Webopticon</a>, which included cool pictures. I showed it to my girlfriend thinking she would find it interesting, and then realized: oh! KML has an altitude attribute. That could be interesting.<br>
One of my projects is to create <a href="http://www.kelvinism.com/2007/12/sydneys-driving-habits.html">maps of Sydney&rsquo;s traffic</a><a href="http://www.blogger.com/"></a>, so I have been experimenting heavily with Mapnik and OSM. I figured I could have some fun and finally parse some gps tracks and display the data.<br>
<a href="http://picasaweb.google.com/lh/photo/bkhs8KqkZyS7yIoA6AeNnA?feat=embedwebsite"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8Ju2Qv3TAIupmzBjORZ5wUBGjxIlwZ_0mrPb0Mku5Yob6_ldYEmtRO0GP_kQ62-aZDZ3fP8_vh6nfXv9NpP5X98oneS25YXXf9Tr-pD1RMkp7l_jbDBWBsqxrA5hIDhH8KvfVjZI0TvGc/s288/gpstracks3.jpg"></a></p>
<p>I first started off trying to play around with the KML files my gps logger natively stores. After a while I realized it shouldn&rsquo;t be this hard to parse the XML, and realized it also stores data in gpx format. I opened up one of the gpx files and immediately saw how much easier it would be to work with. I quickly created a parser for the xml in Python (using the dom method, yet I think I&rsquo;m going to rewrite it using sax), and then with the aid of <a href="http://zcologia.com/news/584/better-python-practices-for-the-geoweb/">an article</a> by Sean Gillies, converted the needed objects into KML. I used the speed attribute (with some magnification) as the altitude, and voila, a pretty picture.<br>
This picture is as Victoria Road crosses James Rouse Drive &ndash; a spot that is always congested in the morning.<br>
I&rsquo;ll likely post some code shortly, I would like to rewrite the parsing section to use something event-driven &ndash; hopefully it will be a little faster.</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Size of Uncompressed OSM File" href="http://localhost:1313/2008/01/size-of-uncompressed-osm-file_95.html">Size of Uncompressed OSM File </a>
      
      
    </h2>

    <div class="post-meta"><span title='2008-01-08 21:30:00.002 +1100 AEDT'>Published on January 8, 2008</span>&nbsp;·&nbsp;2 min

</div>
  </header>

  <div class="entry-content">
    <p>I&rsquo;ve been playing around with <a href="http://www.openstreetmap.com">OSM</a> a little lately, and have been meaning to construct my own slippy map. At first I wanted to do it on my VPS &ndash; but with rather limited storage, and even more limited memory, there just isn&rsquo;t a way. Three problems exists: the first occurs when trying to use osm2pgsql to import the OSM file into the database. Current records state that this typically uses 650+ MB, something my 512MB VPS just doesn&rsquo;t have (although I&rsquo;m writing some code that might make this possible in the future).</p>
<p>The second problem exists with CPU usage. Processes on my VPS don&rsquo;t really utilize the CPU much, which means renicing the process doesn&rsquo;t do a thing. The CPU pegs at 100%, as it is supposed to do, except that the VPS auto-kills processes that stay at 100% for any length of time. Luckily somebody wrote a program called &ldquo;cpulimit&rdquo; (apt-get install cpulimit) that will cap the CPU usage for a process.</p>
<p>The last problem that I thought about is <em>what if</em> I could uncompress the file. Would that use less memory to stick it in the database? I searched and searched but couldn&rsquo;t find an answer to how big the actual .osm file is. I ultimately broke down and decided to spend the 50c it would take to get this all done with EC2, and write some scripts to automate it in the future.</p>
<p>However, since I&rsquo;ve finally uncompressed the .osm, I can tell you that as of about January 1st, 2008, the uncompressed OSM size is 67GB.</p>

  </div>

  
</article>
    </main>

    </div>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Kelvin Nicholson</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
