<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Python | Kelvin Nicholson</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/tags/python/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e5d5fdc18d3ba93e96e9e0174d23fd3f2b9076ee85fb125cc29d561cc8955db8.css" integrity="sha256-5dX9wY07qT6W6eAXTSP9PyuQdu6F&#43;xJcwp1WHMiVXbg=" rel="preload stylesheet" as="style"><script src='/js/syntaxhighlighter.js' type='text/javascript'></script>
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/python/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/python/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<div id='redbar'></div>
<div id='greenbar'></div>

<div class="container">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>




<header class="header">
    <a href='/'><span id='logo'></span></a>
    <ul>
        <li><a href='/tags/travel/'>Travel</a></li>
        <li><a href='/tags/longevity/'>Longevity</a></li>
        <li><a href='/tags/projects/'>Projects</a></li>
        <li><a href='/tags/howtos/'>Tutorials</a></li>
        <li><a href='/about/'>Who</a></li>
    </ul>

</header><main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Solved: slow build times from Dockerfiles with Python packages (pip)" href="http://localhost:1313/2014/07/solved-slow-build-times-from.html">Solved: slow build times from Dockerfiles with Python packages (pip) </a>
      
      
    </h2>

    <div class="post-meta"><span title='2014-07-02 18:13:00.002 +1000 AEST'>Published on July 2, 2014</span>&nbsp;·&nbsp;3 min

</div>
  </header>

  <div class="entry-content">
    <p>I have recently had the opportunity to begin exploring <a href="http://www.docker.com/">Docker</a>, the currently hip way to build application containers, and I generally like it. It feels a bit like using Xen back in 2005, when you still had to download it from cl.cam.ac.uk, but there is <em>huge</em> momentum right now. I like the idea of breaking down each component of your application into unique services and bundling them up - it seems clean. The next year is going to be very interesting with Docker, as I am especially looking forward to seeing how Google&rsquo;s App Engine allows Docker usage, or what&rsquo;s in store for the likes of Flynn, Deis, CoreOS, or Stackdock.</p>
<p>One element I had been frustrated with is the build time of my image to host a Django application I&rsquo;m working on. I kept hearing these crazy low rebuild times, but my container was taking ages to rebuild. I noticed that it was cached up until I re-added my code, and then pip would reinstall all my packages.</p>
<p>It appeared as though anything after I used ADD for my code was being rebuilt, and reading online seemed to confirm this. Most of the items were very quick, e.g. &ldquo;EXPOSE 80&rdquo;, but then it hit &ldquo;RUN pip -r requirements.txt&rdquo;</p>
<p>There are various documented ways around this, from two Dockerfiles to just using packaged libraries. However, I found it easier to just use multiple ADD statements, and the good Docker folks have added caching for them. The idea is to ADD your requirements first, then RUN pip, and then ADD your code. This will mean that any code changes don&rsquo;t invalidate the pip cache.</p>
<p>For instance, I had something (abbreviated snippet) like this:</p>
<pre tabindex="0"><code>\# Set the base image to Ubuntu
FROM ubuntu:14.04

# Update the sources list
RUN apt-get update
RUN apt-get upgrade -y

# Install basic applications
RUN apt-get install -y build-essential

# Install Python and Basic Python Tools
RUN apt-get install -y python python-dev python-distribute python-pip postgresql-client

# Copy the application folder inside the container
ADD . /app

# Get pip to download and install requirements:
RUN pip install -r /app/requirements.txt

# Expose ports
EXPOSE 80 8000

# Set the default directory where CMD will execute
WORKDIR /app

VOLUME \[/app\]

CMD \[&#34;sh&#34;, &#34;/app/run.sh&#34;\]
</code></pre><p>And it rebuild pip whenever the code changes. Just add the requirements and move the RUN pip line:</p>
<pre tabindex="0"><code>\# Set the base image to Ubuntu
FROM ubuntu:14.04

# Update the sources list
RUN apt-get update
RUN apt-get upgrade -y

# Install basic applications
RUN apt-get install -y build-essential

# Install Python and Basic Python Tools
RUN apt-get install -y python python-dev python-distribute python-pip postgresql-client

ADD requirements.txt /app/requirements.txt

# Get pip to download and install requirements:
RUN pip install -r /app/requirements.txt

# Copy the application folder inside the container
ADD . /app

# Expose ports
EXPOSE 80 8000

# Set the default directory where CMD will execute
WORKDIR /app

VOLUME \[/app\]

CMD \[&#34;sh&#34;, &#34;/app/run.sh&#34;\]
</code></pre><p>I feel a bit awkward for having missed something that must be so obvious, so hopefully this can help somebody in a similar situation.</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to TLS Module In SaltStack Not Available (Fixed)" href="http://localhost:1313/2014/05/tls-module-in-saltstack-not-available.html">TLS Module In SaltStack Not Available (Fixed) </a>
      
      
    </h2>

    <div class="post-meta"><span title='2014-05-07 12:50:00.003 +1000 AEST'>Published on May 7, 2014</span>&nbsp;·&nbsp;1 min

</div>
  </header>

  <div class="entry-content">
    <p>I was trying to install <a href="https://github.com/saltstack/halite">HALite</a>, the WebUI for <a href="http://www.saltstack.com/">SaltStack</a>, using the provided instructions. However, I kept getting the following errors when trying to create the certificates using Salt:<br>
<code>   'tls.create_ca_signed_cert' is not available.   'tls.create_ca' is not available.</code><br>
Basically, the &rsquo;tls&rsquo; module in Salt simply didn&rsquo;t appear to work. The reason for this is detailed on <a href="http://intothesaltmine.org/install_and_configure_halite_alpha_on_arch_linux.html">intothesaltmind.org</a>:</p>
<p><em>Note: Use of the tls module within Salt requires the pyopenssl python extension.</em></p>
<p>That makes sense. We can fix this with something like:<br>
<code>   apt-get install libffi-dev   pip install -U pyOpenSSL   /etc/init.d/salt-minion restart</code><br>
Or, better yet, with Salt alone:</p>
<p><code>salt '*' cmd.run 'apt-get install libffi-dev'   salt '*' pip.install pyOpenSSL   salt '*' cmd.run &quot;service salt-minion restart&quot;</code><br>
The commands to create the PKI key should work now:</p>
<p><code>Created Private Key: &quot;/etc/pki/salt/salt_ca_cert.key.&quot; Created CA &quot;salt&quot;: &quot;/etc/pki/salt/salt_ca_cert.crt.&quot;   </code></p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Finding The Same (Misspelled) Name Using Python/NLTK" href="http://localhost:1313/2013/09/finding-same-misspelled-name-using.html">Finding The Same (Misspelled) Name Using Python/NLTK </a>
      
      
    </h2>

    <div class="post-meta"><span title='2013-09-13 17:24:00 +1000 AEST'>Published on September 13, 2013</span>&nbsp;·&nbsp;4 min

</div>
  </header>

  <div class="entry-content">
    <p>I have been meaning to play around with the <a href="http://nltk.org/">Natural Language Toolkit</a> for quite some time, but I had been waiting for a time when I could experiment with it and actually create some value (as opposed to just play with it). A suitable use case appeared this week: matching strings. In particular, matching two different lists of many, many thousands of names.</p>
<p>To give you an example, let&rsquo;s say you had two lists of names, but with the name spelled incorrectly in one list:</p>
<p>List 1:<br>
Leonard Hofstadter<br>
Sheldon Cooper<br>
Penny<br>
Howard Wolowitz<br>
Raj Koothrappali<br>
Leslie Winkle<br>
Bernadette Rostenkowski<br>
Amy Farrah Fowler<br>
Stuart Bloom<br>
Alex Jensen<br>
Barry Kripke</p>
<p>List 2:<br>
Leonard Hofstadter<br>
Sheldon Coopers<br>
Howie Wolowits<br>
Rav Toothrapaly<br>
Ami Sarah Fowler<br>
Stu Broom<br>
Alexander Jensen</p>
<p>This could easily occur if somebody was manually typing in the lists, dictating names over the phone, or spell their name differently (e.g. Phil vs. Phillip) at different times.</p>
<p>If we wanted to match people on List 1 to List 2, how could we go about that? For a small list like this you can just look and see, but with many thousands of people, something more sophisticated would be useful. One tool could be NLTK&rsquo;s edit_distance function. The following Python script displays how easy this is:</p>
<pre tabindex="0"><code>import nltk

list\_1 = \[&#39;Leonard Hofstadter&#39;, &#39;Sheldon Cooper&#39;, &#39;Penny&#39;, &#39;Howard Wolowitz&#39;, &#39;Raj Koothrappali&#39;, &#39;Leslie Winkle&#39;, &#39;Bernadette Rostenkowski&#39;, &#39;Amy Farrah Fowler&#39;, &#39;Stuart Bloom&#39;, &#39;Alex Jensen&#39;, &#39;Barry Kripke&#39;\]

list\_2 = \[&#39;Leonard Hofstadter&#39;, &#39;Sheldon Coopers&#39;, &#39;Howie Wolowits&#39;, &#39;Rav Toothrapaly&#39;, &#39;Ami Sarah Fowler&#39;, &#39;Stu Broom&#39;, &#39;Alexander Jensen&#39;\]

for person\_1 in list\_1:
    for person\_2 in list\_2:
        print nltk.metrics.edit\_distance(person\_1, person\_2), person\_1, person\_2
</code></pre><p>0 Leonard Hofstadter Leonard Hofstadter<br>
15 Leonard Hofstadter Sheldon Coopers<br>
14 Leonard Hofstadter Howie Wolowits<br>
15 Leonard Hofstadter Rav Toothrapaly<br>
14 Leonard Hofstadter Ami Sarah Fowler<br>
16 Leonard Hofstadter Stu Broom<br>
15 Leonard Hofstadter Alexander Jensen<br>
14 Sheldon Cooper Leonard Hofstadter<br>
1 Sheldon Cooper Sheldon Coopers<br>
13 Sheldon Cooper Howie Wolowits<br>
13 Sheldon Cooper Rav Toothrapaly<br>
12 Sheldon Cooper Ami Sarah Fowler<br>
11 Sheldon Cooper Stu Broom<br>
12 Sheldon Cooper Alexander Jensen<br>
16 Penny Leonard Hofstadter<br>
13 Penny Sheldon Coopers<br>
13 Penny Howie Wolowits<br>
14 Penny Rav Toothrapaly<br>
16 Penny Ami Sarah Fowler<br>
9 Penny Stu Broom<br>
13 Penny Alexander Jensen<br>
11 Howard Wolowitz Leonard Hofstadter<br>
13 Howard Wolowitz Sheldon Coopers<br>
4 Howard Wolowitz Howie Wolowits<br>
15 Howard Wolowitz Rav Toothrapaly<br>
13 Howard Wolowitz Ami Sarah Fowler<br>
13 Howard Wolowitz Stu Broom<br>
14 Howard Wolowitz Alexander Jensen<br>
16 Raj Koothrappali Leonard Hofstadter<br>
14 Raj Koothrappali Sheldon Coopers<br>
16 Raj Koothrappali Howie Wolowits<br>
4 Raj Koothrappali Rav Toothrapaly<br>
14 Raj Koothrappali Ami Sarah Fowler<br>
14 Raj Koothrappali Stu Broom<br>
16 Raj Koothrappali Alexander Jensen<br>
14 Leslie Winkle Leonard Hofstadter<br>
13 Leslie Winkle Sheldon Coopers<br>
11 Leslie Winkle Howie Wolowits<br>
14 Leslie Winkle Rav Toothrapaly<br>
14 Leslie Winkle Ami Sarah Fowler<br>
12 Leslie Winkle Stu Broom<br>
12 Leslie Winkle Alexander Jensen<br>
17 Bernadette Rostenkowski Leonard Hofstadter<br>
18 Bernadette Rostenkowski Sheldon Coopers<br>
18 Bernadette Rostenkowski Howie Wolowits<br>
19 Bernadette Rostenkowski Rav Toothrapaly<br>
20 Bernadette Rostenkowski Ami Sarah Fowler<br>
20 Bernadette Rostenkowski Stu Broom<br>
17 Bernadette Rostenkowski Alexander Jensen<br>
15 Amy Farrah Fowler Leonard Hofstadter<br>
14 Amy Farrah Fowler Sheldon Coopers<br>
15 Amy Farrah Fowler Howie Wolowits<br>
14 Amy Farrah Fowler Rav Toothrapaly<br>
3 Amy Farrah Fowler Ami Sarah Fowler<br>
14 Amy Farrah Fowler Stu Broom<br>
13 Amy Farrah Fowler Alexander Jensen<br>
15 Stuart Bloom Leonard Hofstadter<br>
12 Stuart Bloom Sheldon Coopers<br>
12 Stuart Bloom Howie Wolowits<br>
14 Stuart Bloom Rav Toothrapaly<br>
13 Stuart Bloom Ami Sarah Fowler<br>
4 Stuart Bloom Stu Broom<br>
14 Stuart Bloom Alexander Jensen<br>
15 Alex Jensen Leonard Hofstadter<br>
12 Alex Jensen Sheldon Coopers<br>
13 Alex Jensen Howie Wolowits<br>
15 Alex Jensen Rav Toothrapaly<br>
13 Alex Jensen Ami Sarah Fowler<br>
10 Alex Jensen Stu Broom<br>
5 Alex Jensen Alexander Jensen<br>
15 Barry Kripke Leonard Hofstadter<br>
13 Barry Kripke Sheldon Coopers<br>
13 Barry Kripke Howie Wolowits<br>
12 Barry Kripke Rav Toothrapaly<br>
13 Barry Kripke Ami Sarah Fowler<br>
10 Barry Kripke Stu Broom<br>
14 Barry Kripke Alexander Jensen</p>
<p>As you can see, this displays the <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levenstein distance</a> of the two sequences. Another option we have is to look at the ratio.</p>
<pre tabindex="0"><code>len1 = len(list\_1)
len2 = len(list\_2)
lensum = len1 + len2
for person\_1 in list\_1:
    for person\_2 in list\_2:
        levdist = nltk.metrics.edit\_distance(person\_1, person\_2)
        nltkratio = (float(lensum) - float(levdist)) / float(lensum)
        if nltkratio &gt; 0.70:
            print nltkratio, person\_1, person\_2
</code></pre><p>1.0 Leonard Hofstadter Leonard Hofstadter<br>
0.944444444444 Sheldon Cooper Sheldon Coopers<br>
0.777777777778 Howard Wolowitz Howie Wolowits<br>
0.777777777778 Raj Koothrappali Rav Toothrapaly<br>
0.833333333333 Amy Farrah Fowler Ami Sarah Fowler<br>
0.777777777778 Stuart Bloom Stu Broom<br>
0.722222222222 Alex Jensen Alexander Jensen</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to February Sydney Python Presentation" href="http://localhost:1313/2013/02/february-sydney-python-presentation.html">February Sydney Python Presentation </a>
      
      
    </h2>

    <div class="post-meta"><span title='2013-02-22 23:10:00 +1100 AEDT'>Published on February 22, 2013</span>&nbsp;·&nbsp;1 min

</div>
  </header>

  <div class="entry-content">
    <p>In February I gave a presentation to about 80 people at the Sydney Python group hosted by Atlassian. Firstly, Atlassian&rsquo;s office was beautiful, feeling a little like Google&rsquo;s Sydney office, but with beer on tap instead of cereal dispensers. Secondly, the talk before me on Cython by <a href="https://plus.google.com/113985890803565448326/posts">Aaron Defazio</a> was exceptionally interesting, garnering lots of questions from the audience. My presentation, more of a show and tell on piping location data to Google&rsquo;s Latitude through App Engine, was also meant to subtly share my views on the need for innovation in the public sector (all sectors, really).</p>
<p>My slides are below. I used very little text in the slides, but you can probably catch what is going on. The response from the audience was favourable, and I thank <a href="https://twitter.com/djay75">Dylan Jay</a> for giving me the opportunity to speak.</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Migrate Custom Blog to Blogger" href="http://localhost:1313/2013/01/migrate-custom-blog-to-blogger.html">Migrate Custom Blog to Blogger </a>
      
      
    </h2>

    <div class="post-meta"><span title='2013-01-10 20:14:00 +1100 AEDT'>Published on January 10, 2013</span>&nbsp;·&nbsp;5 min

</div>
  </header>

  <div class="entry-content">
    <p>For the last ten years I have run this website from various systems. First it was on Wordpress, then Mambo, then Joomla, and since early 2006 it has been running on custom code written using Django. I used this site as a learning tool for Django, re-wrote it after gaining more knowledge of Django, and then re-wrote it again when Google released App Engine. However, I recently realised that for the last few years I have spent more time writing little features than actually writing. I have entire trips that I never wrote because I was too busy writing code.</p>
<p>This week it all changed. I did the unthinkable. I moved this website to Blogger.</p>
<p>After evaluating some of the features of blogger, i.e. custom domains, location storing, ability to filter on labels, custom HTML/CSS, great integration with Picasa, and their mobile app, I realised I could virtually replace everything I had previously custom made.</p>
<p>This post gives a technical description how to migrate a site running Django, but readily applies to any blog running on custom code. I initially spent a fair bit of time trying to figure out how to convert my existing RSS feed into something Blogger could accept, but every solution required troubleshooting. I soon remembered why I love Django so much, and that it would be trivial to generate the correct XML for import.</p>
<ol>
<li>
<p><strong>Create Blogger Template</strong><br>
I wanted to keep my design, so I hacked it to support Blogger. Take one of the existing templates, edit the HTML, and adjust it for your design. If you&rsquo;ve worked with templates before this shouldn&rsquo;t be too difficult.</p>
</li>
<li>
<p><strong>Generate Sample XML</strong><br>
The first step was to generate a sample XML file from Blogger to see what would be needed for import. Create a sample post with a unique name and a few labels, and location. In Blogger, go to Settings-&gt;Other and click Export Blog. The first 90% of the file will be for your template and other settings, but eventually you will find a section with <!-- raw HTML omitted --> elements in it. Copy this sample element out - this will become your template.</p>
</li>
<li>
<p><strong>Format Template</strong><br>
Using the sample section from the blog export, format it so the view you will create populates it correctly. A note of caution: the template needs time in ISO 8601 format, you need the <!-- raw HTML omitted --> element, and the location element needs coordinates if there is a name. It won&rsquo;t import later if there is a name with no coordinates. My template looks like this:</p>
</li>
</ol>
<h4 id="feedsrsshtml">feeds/rss.html</h4>
<pre tabindex="0"><code>{%  load blog\_extras %}
{% for entry in entries %}
    tag:blogger.com,1999:blog-1700991654357243752.post-{% generate\_id %}
        {{ entry.publish\_date|date:&#34;Y-m-d&#34; }}T10:30:00.000123
        {{ entry.publish\_date|date:&#34;Y-m-d&#34; }}T10:30:00.000123
        {% for tag in entry.tags %}
            {% endfor %}

        {{ entry.title }}
        {{ entry.content }}

        

        Joe Bloggs
            https://plus.google.com/12345689843655881853
            kelvin@example.com 
{% endfor %}
</code></pre><p>This isn&rsquo;t really RSS, so if you are pedantic you can name it something else. You will notice I loaded some template tags in there (&ldquo;blog_extras&rdquo;). This is for generating the random number, as this is needed for the ID element.. Here&rsquo;s the template tag.</p>
<h4 id="blog_extraspy">blog_extras.py</h4>
<pre tabindex="0"><code>\# &#39;import random&#39; at beginning of file
def generate\_id():
    id = &#34;&#34;
    for x in xrange(1, 7):
        id = id + str(int(random.uniform(400, 900)))
    id = id + &#34;8&#34;
    return {&#39;obj&#39;: id}
register.inclusion\_tag(&#39;blog/generate\_id.html&#39;)(generate\_id)
</code></pre><h4 id="bloggenerate_idhtml">/blog/generate_id.html</h4>
<pre tabindex="0"><code>{{ obj }}
</code></pre><ol start="4">
<li><strong>Create Code To Populate View</strong><br>
This section should be easy if you have written your blog in Django. Simply populate the template, what I have shown as &ldquo;rss.html&rdquo; above</li>
</ol>
<h4 id="blogviewspy">blog/views.py</h4>
<pre tabindex="0"><code>def show\_rss(self):
    q = Entry.all()
    q = q.filter(&#34;genre !=&#34;, &#34;blog&#34;)
    entries = q.fetch(500)
    return render\_to\_response(&#34;feeds/rss.html&#34;, {
        &#39;entries&#39;: entries,
        }, mimetype=&#39;text/plain&#39;)
</code></pre><p>I did a filter on the model to not include &ldquo;blog&rdquo; entries - these are my travel stories, and I exported them separately. Remember that this is all happening on App Engine, so you will need to adjust if using Django&rsquo;s normal ORM.</p>
<ol start="5">
<li>
<p><strong>Download Entries</strong><br>
Visit the URL you mapped to the &ldquo;show_rss&rdquo; function in urls.py, it should generate your list of entries. Copy and paste those entries into the exported XML from Blogger where you took out the original <!-- raw HTML omitted --> element.</p>
</li>
<li>
<p><strong>Import Entries</strong><br>
Now go to Blogger and import your blog. With any luck you will have imported all your entries. You will probably need to do this a few times as you tweak the text. I had to remove some newlines from my original posts.</p>
</li>
</ol>
<p><strong>Optional Steps</strong></p>
<ol start="7">
<li><strong>Create Redirect URLS</strong><br>
Links in Blogger appear to only end in .html, which is a problem for links coming from Django. Luckily, Blogger includes the ability to add redirects. Go to Settings-&gt;Other-Search Preferences. You can then edit redirects there. I generated a list of my old URLs and combined that with a list of the new URLs. Hint: you can use Yahoo Pipes to extract a list of URLS from a RSS feed. If you open any of the links in Excel and split on forward slashes, remember that it will cut off leading zeros. Set that field to TEXT during import.</li>
</ol>
<p>I decided not to create redirects for every entry, as I didn&rsquo;t really have time, and it only probably matters if somebody links directly to that page. I opened Google Analytics and looked at the Search Engine Optimisation page and sorted it by the most used inbound links. After getting down to entries that only had 1 inbound request per month I stopped creating redirects.</p>
<ol start="8">
<li>
<p><strong>Host Stylesheets and Images Externally</strong><br>
Blogger won&rsquo;t host host files, so you need to work around this problem. All my images are generally from Picasa, except very specific website related ones. I moved those to Amazon&rsquo;s S3 and updated the links. I did the same with my CSS. You could probably store them in Google Storage, too.</p>
</li>
<li>
<p><strong>Create Filters on Labels</strong><br>
If you had any previous groupings you can still link to them using label searches (in my case I actually added the &ldquo;genre&rdquo; as a label). The syntax is &ldquo;/search/label/<em>labelname</em>/&rdquo;, as you can see in my <a href="http://www.kelvinism.com/search/label/howtos/">howtos section</a> link.</p>
</li>
<li>
<p><strong>Update Webmaster Tools</strong><br>
If your site is part of Google&rsquo;s Webmaster Tools, you will want to login and take a look that things are OK. You will also probably want to update your sitemap (send Google your atom.xml feed).</p>
</li>
</ol>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Integrate imified into Django" href="http://localhost:1313/2011/01/integrate-imified-into-django_2631.html">Integrate imified into Django </a>
      
      
    </h2>

    <div class="post-meta"><span title='2011-01-18 21:30:00.002 +1100 AEDT'>Published on January 18, 2011</span>&nbsp;·&nbsp;2 min

</div>
  </header>

  <div class="entry-content">
    <p>I recently had the desire to send small updates to my so called <a href="http://www.blogger.com/about-me/">lifestream</a> page via XMPP/GTalk. I played around with Twisted Words and several other Python XMPP clients, but I didn&rsquo;t really want to keep a daemon running if unnecessary. It turns out imified took a lot of the pain out of it. The steps for me were as follows:<br>
Create an account with imified, and create a URL, e.g. /app/api/<br>
We then configure the <strong>urls.conf</strong></p>
<pre tabindex="0"><code>urlpatterns = patterns(&#39;&#39;,   
(r&#39;^app/api/$&#39;, bot\_stream),
)
</code></pre><p>We then create the necessary views. So, in <strong>views.py</strong>:</p>
<pre tabindex="0"><code>from django.shortcuts import render\_to\_response
from django.http import HttpResponse
from lifestream.forms import \*
from datetime import datetime
from time import time

def bot\_stream(request):
if request.method == &#39;POST&#39;:
botkey = request.POST.get(&#39;botkey&#39;)
username = request.POST.get(&#39;user&#39;)
msg = request.POST.get(&#39;msg&#39;)
network = request.POST.get(&#39;network&#39;)

if username == &#34;username@gmail.com&#34; or network == &#34;debugger&#34;:
blob\_obj = Blob(id=time(), body=msg, service\_name=&#34;Mobile&#34;,
link=&#34;http://www.kelvinism.com/about-me/&#34;, published=datetime.now())
blob\_obj.save()
resp = &#34;OK&#34;
else:
resp = &#34;Wrong username %s&#34; % username
else:
resp = &#34;No POST data&#34;
return HttpResponse(resp)
</code></pre><p>To complete this little example, you can see what I used for my <strong>models.py</strong></p>
<pre tabindex="0"><code>class Blob(models.Model):
id = models.CharField(max\_length=255, primary\_key=True)
body = models.TextField(max\_length = 1024, null = True, blank = True)
service\_name = models.CharField(max\_length=50, null=True, blank=True)
link = models.URLField(max\_length=255, verify\_exists=False, null=True, blank=True)
published = models.DateTimeField(null=True, blank=True)

def \_\_unicode\_\_(self):
return self.id

class Meta:
ordering = \[&#39;-published&#39;\]
verbose\_name = &#39;Blob&#39;
verbose\_name\_plural = &#39;Blobs&#39;

def get\_absolute\_url(self):
return &#34;/about-me/&#34;
</code></pre><p>It maybe isn&rsquo;t super elegant, but it works just fine, and maybe can provide a hint if somebody else is contemplating using a homebuilt xmpp solution, or just pawning it off on IMified.</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Hacking Splunk with Python" href="http://localhost:1313/2010/10/hacking-splunk-with-python_9416.html">Hacking Splunk with Python </a>
      
      
    </h2>

    <div class="post-meta"><span title='2010-10-28 21:30:00.002 +1100 AEDT'>Published on October 28, 2010</span>&nbsp;·&nbsp;1 min

</div>
  </header>

  <div class="entry-content">
    <p>A few weeks ago I saw an opening to give a 5-10 minute lightening talk at SyPy (Sydney Python), and with two nights to prepare, decided it would be interesting to explore Splunk&rsquo;s usage of Python. Below was the quick presentation I gave.</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Using HTML in a Django form label" href="http://localhost:1313/2010/07/using-html-in-django-form-label_2240.html">Using HTML in a Django form label </a>
      
      
    </h2>

    <div class="post-meta"><span title='2010-07-11 20:30:00.002 +1000 AEST'>Published on July 11, 2010</span>&nbsp;·&nbsp;1 min

</div>
  </header>

  <div class="entry-content">
    <p>I recently had the need to add some HTML to the label for a form field using Django. The solution is pretty easy, except I didn&rsquo;t see it written explicitly anywhere, and I missed the memo of the function I should be using.<br>
My form first just had the HTML in the form label as so:</p>
<pre tabindex="0"><code>
from django import forms

class AccountForm(forms.Form):
    name = forms.CharField(widget=forms.TextInput(), max\_length=15, label=&#39;Your Name ([why](http://www.blogger.com/questions/whyname/)?&#39;)
</code></pre><p>However, when I displayed it, the form was autoescaped.<br>
<a href="http://picasaweb.google.com/lh/photo/PyGNXDrpXtrgBNnoOLlfLA?feat=embedwebsite"><img loading="lazy" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhvsLvb6I4SDBB3NKptLZzGLGnwUZK0KmYlx7X9UC2_fzyQCNTkeFiKz5-4_3BmKArYZhRwU8TNEIhrGAMsb039N47hxcY8BIMEJjfK1UafYCRvAPzY18c8ceq3QFOOsp_oGO6SavZ1LmGR/s800/accountsform.jpg"></a></p>
<p>This is generally a good thing, except my form obviously didn&rsquo;t display correctly. I tried autoescaping it in the template, but that didn&rsquo;t work. To resolve this you&rsquo;ll need to mark that <em>individual label</em> as safe. Thus:</p>
<pre tabindex="0"><code>
from django.utils.safestring import mark\_safe
from django import forms

class AccountForm(forms.Form):
    name = forms.CharField(widget=forms.TextInput(), max\_length=15, label=mark\_safe(&#39;Your Name ([why](http://www.blogger.com/questions/whyname/)?)&#39;))
    
</code></pre><p>It will now display correctly:</p>
<pre tabindex="0"><code>In \[1\]: from myproject.forms import \*

In \[2\]: form = AccountForm()

In \[3\]: form.as\_ul()
Out\[3\]: u&#39;
*   Your Name ([why](http://www.blogger.com/questions/whyname/)?): 
&#39;
</code></pre><p>There&rsquo;s maybe another easier way to do this, but this worked for me.</p>

  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Ubuntu 10.04, Django and GAE - Part 1" href="http://localhost:1313/2010/06/ubuntu-1004-django-and-gae-part-1_8750.html">Ubuntu 10.04, Django and GAE - Part 1 </a>
      
      
    </h2>

    <div class="post-meta"><span title='2010-06-12 20:30:00.004 +1000 AEST'>Published on June 12, 2010</span>&nbsp;·&nbsp;2 min

</div>
  </header>

  <div class="entry-content">
    <p>I&rsquo;ve started to get into Google&rsquo;s App Engine again, and have started developing a simple product that I had a use for. The initial first draft was a quick 200 lines in webapp, and it worked great. However, I&rsquo;m starting to find certain things quite cumbersome. I&rsquo;m a huge fan of Django, and but also about keeping things as simple as possible, which is why I picked webapp to begin with.<br>
I&rsquo;m now considering making a swap to Django, but there are some development issues; namely, I&rsquo;m using Ubuntu 10.04, Python 2.6, and Django 1.2. This setup presents several setbacks, as GAE has the requirement of Django 1.1 and Python 2.5. There are two solutions that I found: a) use virtualenv, which <a href="http://www.blogger.com/blogger.g?blogID=3439832858234004835#">I&rsquo;ve detailed</a>, or b) chroot. This document will hopefully show how to configure a chroot environment of Ubuntu 9.10 and prepare it for Django on GAE. Using a jailed environment should allow you to edit your code with your normal IDE and VCS, but use Django 1.1 and Python 2.5.<br>
First, I installed schroot and debootstrap.</p>
<pre tabindex="0"><code>$ sudo apt-get install schroot debootstrap
</code></pre><p>Second, I edited /etc/schroot/schroot.conf and added the following section to the end.</p>
<pre tabindex="0"><code>\[karmic\]
description=karmic
type=directory
location=/var/chroot/karmic
priority=3
users=kelvinn #your username goes here
groups=admin
root-groups=root
run-setup-scripts=true
run-exec-scripts=true
</code></pre><p>Third, I created the directories needed for the jailed environment and installed karmic.</p>
<pre tabindex="0"><code>$ sudo mkdir -p /var/chroot/karmic
$ sudo debootstrap --arch i386 karmic /var/chroot/karmic 
</code></pre><p>Forth, I logged into the jailed environment and updated packages, installed Python 2.5 / Django 1.1. Make sure to note that I don&rsquo;t call &lsquo;python&rsquo;, I call &lsquo;python2.5&rsquo;.</p>
<pre tabindex="0"><code>$ sudo schroot -c karmic
(karmic)root@kelvinn-laptop:~# apt-get update
(karmic)root@kelvinn-laptop:~# apt-get install python2.5
(karmic)root@kelvinn-laptop:~# cd /usr/src
(karmic)root@kelvinn-laptop:~# apt-get install wget
(karmic)root@kelvinn-laptop:/usr/src# wget http://www.djangoproject.com/download/1.1.2/tarball/
(karmic)root@kelvinn-laptop:/usr/src# tar -xpzf Django-1.1.2.tar.gz
(karmic)root@kelvinn-laptop:/usr/src/Django-1.1.2# python2.5 setup install
(karmic)root@kelvinn-laptop:/usr/src/Django-1.1.2# exit
</code></pre><p>Lastly, I log in as my normal user, and start the app. Let&rsquo;s say I have a folder called &lsquo;~/gaeapps&rsquo; for my GAE stuff, and that&rsquo;s where I put the SDK.</p>
<pre tabindex="0"><code>$ scroot -c karmic
(karmic)kelvinn@kelvinn-laptop:~/gaeapps$ ls
google\_appengine  myproject
(karmic)kelvinn@kelvinn-laptop:~/gaeapps$ google\_appengine/dev\_appserver.py myproject
</code></pre>
  </div>

  
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="post-title entry-hint-parent">
      
      <a aria-label="post link to Ubuntu 10.04, Django and GAE - Part 2" href="http://localhost:1313/2010/06/ubuntu-1004-django-and-gae-part-2_6130.html">Ubuntu 10.04, Django and GAE - Part 2 </a>
      
      
    </h2>

    <div class="post-meta"><span title='2010-06-12 20:30:00.005 +1000 AEST'>Published on June 12, 2010</span>&nbsp;·&nbsp;2 min

</div>
  </header>

  <div class="entry-content">
    <p>All my Django sites are running 1.2, which poses a conflict with writing apps for Google&rsquo;s App Engine, as use_library currently only supports &lt; Django 1.1. There are two solutions that I found: a) use virtualenv, or b) chroot, which <a href="http://www.kelvinism.com/howtos/ubuntu-1004-django-and-gae-part-1/">I&rsquo;ve already detailed</a>. This document will hopefully show you how to create a virtual environment to use a secondary django version, especially for GAE. Of the two options, I think this one is a bit quicker, but there will likely be tradeoffs that a chroot environment can deal with better, e.g. python imaging (I don&rsquo;t use it for GAE).<br>
First, install PIP and virtualenv:</p>
<pre tabindex="0"><code>kelvinn@kelvinn-laptop:~/workspace$ sudo easy\_install -U pip
kelvinn@kelvinn-laptop:~/workspace$ sudo pip install -U virtualenv
</code></pre><p>Second, configure an environment for any app that will use Django 1.1:</p>
<pre tabindex="0"><code>kelvinn@kelvinn-laptop:~/workspace$ virtualenv --python=python2.5 --no-site-packages django-1.1
New python executable in django-1.1/bin/python
Installing setuptools............done.
kelvinn@kelvinn-laptop:~/workspace$ pip install -E django-1.1 yolk
kelvinn@kelvinn-laptop:~/workspace$ pip install -E django-1.1 Django==1.1
</code></pre><p>Now, download the <a href="http://code.google.com/appengine/downloads.html#Google_App_Engine_SDK_for_Python">python GAE sdk</a> and put it in the django-1.1 folder. I also just dump any project directory requiring Django 1.1 into this django-1.1 folder, although I guess you could create a virtualenv for each project. The last thing to do is start the virtual environment, and run the GAE app.</p>
<pre tabindex="0"><code>kelvinn@kelvinn-laptop:~/workspace$ source django-1.1/bin/activate
(django-1.1)kelvinn@kelvinn-laptop:~/workspace$ yolk -l
(django-1.1)kelvinn@kelvinn-laptop:~/workspace$ cd django-1.1
(django-1.1)kelvinn@kelvinn-laptop:~/workspace/django-1.1$ ls
bin  google\_appengine  include  lib  myproject1 myproject2
(django-1.1)kelvinn@kelvinn-laptop:~/workspace/django-1.1$ google\_appengine/dev\_appserver.py myproject1
</code></pre><p>When you&rsquo;re all finished, you can jump out of virtualenv:</p>
<pre tabindex="0"><code>(django-1.1)kelvinn@kelvinn-laptop:~/workspace/django-1.1$ deactivate
</code></pre><p><strong>Update</strong>: You&rsquo;ll find this article especially interesting if you get an error such as the following:</p>
<pre tabindex="0"><code>UnacceptableVersionError: django 1.1 was requested, but 1.2.0.beta.1 is already in use
</code></pre>
  </div>

  
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/tags/python/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>

    </div>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Kelvin Nicholson</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
